{"visual":{"name":"crossTab","displayName":"CrossTab","guid":"PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77_DEBUG","visualClassName":"CrossTab","version":"1.0.0","description":"","supportUrl":"","gitHubUrl":""},"apiVersion":"1.1.0","author":{"name":"","email":""},"assets":{"icon":"assets/icon.png"},"externalJS":[],"style":"style/visual.less","capabilities":{"dataRoles":[{"name":"XAxis","kind":0,"displayName":"X-Axis"},{"name":"YAxis","kind":1,"displayName":"Y-Axis"}],"dataViewMappings":[{"categorical":{"categories":{"for":{"in":"XAxis"},"dataReductionAlgorithm":{"top":{}}},"values":{"select":[{"bind":{"to":"YAxis"}}]}}}],"objects":{"general":{"displayName":"General","properties":{"color1":{"type":{"fill":{"solid":{"color":true}}},"displayName":"Colour 1"},"color1Val":{"type":{"numeric":true},"displayName":"Colour 1 Value"},"color1LegendVal":{"type":{"text":true},"displayName":"Legend 1 Text"},"color2":{"type":{"fill":{"solid":{"color":true}}},"displayName":"Colour 2"},"color2Val":{"type":{"numeric":true},"displayName":"Colour 2 Value"},"color2LegendVal":{"type":{"text":true},"displayName":"Legend 2 Text"},"color3":{"type":{"fill":{"solid":{"color":true}}},"displayName":"Colour 3'"},"color3Val":{"type":{"numeric":true},"displayName":"Colour 3 Value"},"color3LegendVal":{"type":{"text":true},"displayName":"Legend 3 Text"},"color4":{"type":{"fill":{"solid":{"color":true}}},"displayName":"Colour 4"},"color4Val":{"type":{"numeric":true},"displayName":"Colour 4 Value"},"color4LegendVal":{"type":{"text":true},"displayName":"Legend 4 Text"},"color5":{"type":{"fill":{"solid":{"color":true}}},"displayName":"Colour 5"},"color5Val":{"type":{"numeric":true},"displayName":"Colour 5 Value"},"color5LegendVal":{"type":{"text":true},"displayName":"Legend 5 Text"},"showlegend":{"type":{"bool":true},"displayName":"Legend"},"showdata":{"type":{"bool":true},"displayName":"Values In Grid"},"showtotals":{"type":{"bool":true},"displayName":"Show Totals"}}}}},"content":{"js":"/*\n *  Power BI Visual CLI\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var visual;\n        (function (visual) {\n            var PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77;\n            (function (PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77) {\n                var CrossTab = (function () {\n                    function CrossTab(options) {\n                        this.svgSize = { width: 800, height: 300 };\n                        this.dicColor = [];\n                        //private margin: IMargin = { left: 10, right: 10, bottom: 15, top: 15 };\n                        this.margin = { left: 10, right: 10, bottom: 15, top: 15 };\n                        this.animationDuration = 1000;\n                        this.svgSize.height = options.element.clientHeight;\n                        this.svgSize.width = options.element.clientWidth;\n                        this.svgDiv = d3.select(options.element)\n                            .append('div')\n                            .attr(\"style\", \"overflow: auto\")\n                            .attr('class', 'crossTabContainer')\n                            .attr(\"style\", 'height:' + this.svgSize.height)\n                            .attr(\"style\", 'width:' + this.svgSize.width);\n                        this.svg = this.svgDiv\n                            .append('svg')\n                            .attr(\"class\", \"svgCrossTab\")\n                            .attr(\"height\", this.svgSize.height)\n                            .attr(\"width\", this.svgSize.width);\n                        this.selectionManager = options.host.createSelectionManager();\n                    }\n                    /*constructor(options: VisualConstructorOptions) {\n                        console.log('Visual constructor', options);\n                        this.target = options.element;\n                        this.updateCount = 0;\n                    }*/\n                    CrossTab.converter = function (dataView, dicColors /*colors: IDataColorPalette*/, showTotals) {\n                        // no category - nothing to display\n                        if (!dataView ||\n                            !dataView.categorical ||\n                            !dataView.categorical.categories ||\n                            !dataView.categorical.categories[0] ||\n                            !dataView.categorical.categories[0].values ||\n                            !dataView.categorical.categories[0].values.length) {\n                            return {\n                                dataPoints: null\n                            };\n                        }\n                        // no values - nothing to display\n                        if (!dataView.categorical.values ||\n                            !dataView.categorical.values[0] ||\n                            !dataView.categorical.values[0].values ||\n                            !dataView.categorical.values[0].values.length) {\n                            return {\n                                dataPoints: null\n                            };\n                        }\n                        //var categoryValueFormatter: IValueFormatter;\t\n                        //var legendValueFormatter: IValueFormatter;\n                        var dataPoints = [];\n                        var catMetaData = dataView.metadata;\n                        var catTable = dataView.table;\n                        var catX = [];\n                        var catY = [];\n                        var data;\n                        var k, id, categoryX, categoryY, values;\n                        //var formatStringProp = CrossTab.Properties.general.formatString;\n                        var dataViewMetadata = dataView.metadata;\n                        //this calculates the totals on the bottom Totals row, which is added at the end (see below)\n                        var totalsCol = [];\n                        if (showTotals) {\n                            for (var n = 1; n < dataView.table.columns.length; n++) {\n                                var total = 0;\n                                for (var m = 0; m < dataView.table.rows.length; m++) {\n                                    if (dataView.table.rows[m][n] && typeof dataView.table.rows[m][n] !== 'object') {\n                                        total += dataView.table.rows[m][n];\n                                    }\n                                }\n                                if (total && dataView.table.rows.length > 0) {\n                                    totalsCol.push({\n                                        categoryX: dataView.metadata.columns[n].displayName,\n                                        value: Math.round(total / dataView.table.rows.length)\n                                    });\n                                }\n                                else {\n                                    totalsCol.push({\n                                        categoryX: dataView.metadata.columns[n].displayName,\n                                        value: null\n                                    });\n                                }\n                            }\n                        }\n                        //create standard datapoints\n                        for (var i in dataView.table.rows) {\n                            data = [];\n                            values = [];\n                            k = 0;\n                            for (var j in dataView.table.columns) {\n                                //id = SelectionId.createWithId(dataView.categorical.categories[0].identity[0]);\n                                if (!catMetaData.columns[j].isMeasure) {\n                                    categoryY = catY[i] = catTable.rows[i][j];\n                                }\n                                if (catMetaData.columns[j].isMeasure) {\n                                    var value = catTable.rows[i][j];\n                                    var valueStr;\n                                    if (value !== undefined) {\n                                        categoryX = catX[j] = catMetaData.columns[j].displayName;\n                                        if (catMetaData.columns[j].groupName) {\n                                            categoryX += \": \" + catMetaData.columns[j].groupName;\n                                            catY[j] += \": \" + catMetaData.columns[j].groupName;\n                                        }\n                                    }\n                                    values[k] = { value: value, valueStr: valueStr, category: categoryX, fill: null };\n                                    k++;\n                                }\n                            }\n                            values.forEach(function (element) {\n                                dataPoints.push({\n                                    categoryY: categoryY,\n                                    categoryX: element.category,\n                                    value: element.value,\n                                    valueStr: element.valueStr,\n                                    identity: id,\n                                    fill: element.fill,\n                                    isTotal: false\n                                });\n                            }, this);\n                            if (showTotals) {\n                                //For totals (average) at the end of each row \n                                var total = 0;\n                                for (var l in values) {\n                                    if (values[l].value) {\n                                        total += values[l].value;\n                                    }\n                                }\n                                //add values for end of each row to this rows set of datapoints\n                                dataPoints.push({\n                                    categoryY: categoryY,\n                                    categoryX: 'Total',\n                                    value: Math.round(total / values.length),\n                                    valueStr: null,\n                                    identity: null,\n                                    fill: null,\n                                    isTotal: true\n                                });\n                            }\n                        }\n                        if (showTotals) {\n                            //add totals row\n                            totalsCol.forEach(function (element) {\n                                dataPoints.push({\n                                    categoryY: 'Total',\n                                    categoryX: element.categoryX,\n                                    value: element.value,\n                                    valueStr: null,\n                                    identity: null,\n                                    fill: null,\n                                    isTotal: true\n                                });\n                            }, this);\n                            //push totals columns\n                            catX.push('Total');\n                            catY.push('Total');\n                        }\n                        return {\n                            dataPoints: dataPoints,\n                            categoryX: catX.filter(function (n) { return n !== undefined; }),\n                            categoryY: catY.filter(function (n) { return n !== undefined; }),\n                        };\n                    };\n                    CrossTab.prototype.update = function (options) {\n                        if (!options.dataViews || !options.dataViews[0])\n                            return;\n                        this.svg.selectAll(\"*\").remove();\n                        this.mainGraphics = this.svg;\n                        this.setViewportSize(options.viewport);\n                        this.updateInternal(options);\n                        this.setSVGSize(options.viewport);\n                    };\n                    CrossTab.prototype.updateInternal = function (options) {\n                        var dataView = this.dataView = options.dataViews[0];\n                        var showTotals = this.getShowTotals(options.dataViews[0]);\n                        var chartData = this.chartData = CrossTab.converter(dataView, this.dicColor, showTotals);\n                        //var suppressAnimations = Boolean(options.suppressAnimations);\n                        if (chartData.dataPoints) {\n                            var minDataValue = d3.min(chartData.dataPoints, function (d) { return d.value; });\n                            var maxDataValue = d3.max(chartData.dataPoints, function (d) { return d.value; });\n                            //calculate the max length of the categoryX/Y columns as we cannot compute the width until after it's rendered\n                            var categoryXTextLength = 1, categoryYTextLength = 1, categoryXTextWidth = 10, categoryYTextWidth = 10;\n                            var showLegend = this.getShowLegend(dataView);\n                            var gridSizeWidth = 28, gridSizeHeight = 28;\n                            var legendElementWidth = gridSizeWidth;\n                            var legendElementHeight = gridSizeHeight / 2;\n                            var xOffset = gridSizeWidth + this.margin.left;\n                            var yOffset = this.margin.top;\n                            var dicColor = this.dicColor = [];\n                            this.getColors(dataView);\n                            this.mainGraphics.selectAll(\".categoryYLabel\")\n                                .data(chartData.categoryY)\n                                .enter().append(\"text\")\n                                .text(function (d) {\n                                return d;\n                            })\n                                .attr(\"dy\", \".71em\")\n                                .attr(\"x\", this.margin.left)\n                                .attr(\"y\", function (d, i) {\n                                return (i * gridSizeHeight + (yOffset) / 2.5) + categoryYTextWidth;\n                            })\n                                .style(\"text-anchor\", \"start\")\n                                .attr(\"transform\", \"translate(-6,\" + gridSizeHeight + \")\")\n                                .attr(\"class\", \"categoryYLabel mono axis\")\n                                .style(\"font-size\", \"6pt\");\n                            //this.mainGraphics.selectAll(\".categoryYLabel\")\n                            //     .call(this.wrap, gridSizeWidth);\n                            this.mainGraphics.selectAll(\".categoryYLabel\")\n                                .each(function () { categoryXTextWidth = Math.max(categoryXTextWidth, this.getComputedTextLength()); });\n                            this.mainGraphics.selectAll(\".categoryXLabel\")\n                                .data(chartData.categoryX)\n                                .enter().append(\"text\")\n                                .text(function (d) {\n                                return d;\n                            })\n                                .attr(\"transform\", function (d, i) {\n                                var deg = -90;\n                                var cx = this.getComputedTextLength() / 2;\n                                var cy = 20;\n                                return \"translate(\" + (xOffset + categoryXTextWidth + ((i + 1) * gridSizeWidth)) + \", \" + (0) + \")rotate(\" + deg + \",\" + 0 + \",\" + yOffset + \")\";\n                            })\n                                .style(\"text-anchor\", \"end\")\n                                .attr(\"startOffset\", \"100%\")\n                                .attr(\"dy\", \"-.5em\")\n                                .attr(\"class\", \"categoryXLabel mono axis\");\n                            //this.truncateTextIfNeeded(this.mainGraphics.selectAll(\".categoryXLabel\"), 200);\n                            //calculate categoryYTextWidth\n                            this.mainGraphics.selectAll(\".categoryXLabel\")\n                                .each(function () { categoryYTextWidth = Math.max(categoryYTextWidth, this.getComputedTextLength()); });\n                            //re-apply categoryYTextWidth to CategoryYLabel\n                            this.mainGraphics.selectAll(\".categoryYLabel\")\n                                .attr(\"y\", function (d, i) {\n                                return (i * gridSizeHeight + (yOffset) / 2.5) + categoryYTextWidth;\n                            });\n                            //we need to wait until we have computed the category axis text widths before setting the svg size:\n                            this.svgSize.width = (gridSizeWidth * (chartData.categoryX.length + 1)) + categoryXTextWidth;\n                            this.svgSize.height = (gridSizeHeight * (chartData.categoryY.length + 1)) + categoryYTextWidth;\n                            if (showLegend) {\n                                this.svgSize.height += gridSizeHeight + yOffset * 2;\n                            }\n                            var selectionManager = this.selectionManager;\n                            var heatMap = this.mainGraphics.selectAll(\".categoryX\")\n                                .data(chartData.dataPoints)\n                                .enter().append(\"rect\")\n                                .attr(\"x\", function (d, i) { return (chartData.categoryX.indexOf(d.categoryX) * gridSizeWidth + xOffset) + (categoryXTextWidth - 10); })\n                                .attr(\"y\", function (d, i) { return ((chartData.categoryY.indexOf(d.categoryY) + 0.5) * gridSizeHeight + yOffset) + categoryYTextWidth; })\n                                .attr(\"class\", \"categoryX bordered\")\n                                .attr(\"width\", gridSizeWidth)\n                                .attr(\"height\", gridSizeHeight)\n                                .attr(\"rx\", 4)\n                                .attr(\"ry\", 4)\n                                .style(\"stroke\", 'white')\n                                .style(\"stroke-width\", 1)\n                                .style(\"fill\", '#E8E8E8');\n                            function getColor(val, isTotal) {\n                                if (isTotal) {\n                                    return '#5E5E5E';\n                                }\n                                else if (dicColor[val]) {\n                                    return dicColor[val].solid.color;\n                                }\n                                else {\n                                    return '#E8E8E8';\n                                }\n                            }\n                            var elementAnimation = this.getAnimationMode(heatMap, true);\n                            elementAnimation.style(\"fill\", function (d) { return getColor(d.value, d.isTotal); });\n                            var heatMap1 = this.mainGraphics.selectAll(\".categoryX\")\n                                .on('mouseover', function (d) {\n                                d3.select(this).transition()\n                                    .ease(\"elastic\")\n                                    .duration(1000)\n                                    .attr(\"rx\", 8)\n                                    .attr('ry', 8);\n                                mouseover(d.categoryX, d.categoryY);\n                                //d3.event.stopPropagation();\n                            })\n                                .on('mouseout', function (d) {\n                                d3.select(this).transition()\n                                    .ease(\"elastic\")\n                                    .duration(1000)\n                                    .attr(\"rx\", 4)\n                                    .attr('ry', 4);\n                                mouseout();\n                                //d3.event.stopPropagation();\n                            })\n                                .on('click', function (d) {\n                                if (d.selected) {\n                                    d3.selectAll(\".categoryX\").style('opacity', 1);\n                                    d.selected = null;\n                                }\n                                else {\n                                    d3.selectAll(\".categoryX\").style('opacity', 0.6);\n                                    //selectionManager.select(d.identity).then(ids => d3.select(this).style('opacity', 1));\n                                    d.selected = true;\n                                }\n                            });\n                            function mouseover(categoryX, categoryY) {\n                                d3.selectAll(\".categoryXLabel\").classed(\"active\", function (d, i) { return d == categoryX; });\n                                d3.selectAll(\".categoryYLabel\").classed(\"active\", function (d, i) { return d == categoryY; });\n                            }\n                            function mouseout() {\n                                d3.selectAll(\"text\").classed(\"active\", false);\n                            }\n                            var showDataInRect = this.getShowData(dataView);\n                            if (showDataInRect) {\n                                this.mainGraphics.selectAll(\".rectValue\")\n                                    .data(chartData.dataPoints)\n                                    .enter().append(\"text\")\n                                    .attr(\"x\", function (d, i) { return (chartData.categoryX.indexOf(d.categoryX) * gridSizeWidth + xOffset) + categoryXTextWidth - 25; })\n                                    .attr(\"y\", function (d, i) { return ((chartData.categoryY.indexOf(d.categoryY) + 0.75) * gridSizeHeight + yOffset) + categoryYTextWidth - 2; })\n                                    .attr(\"dy\", \"1.81em\")\n                                    .style(\"text-anchor\", \"middle\")\n                                    .style(\"fill\", \"White\")\n                                    .attr(\"class\", \"rectValue mono axis bar-text\")\n                                    .attr(\"transform\", \"translate(\" + gridSizeHeight + \", -6)\")\n                                    .text(function (d) {\n                                    if (d.value) {\n                                        return d.value.toString(); //.substring(0,1)\n                                    }\n                                    else {\n                                        return null;\n                                    }\n                                });\n                            }\n                            else {\n                                heatMap.append(\"title\").text(function (d) {\n                                    //return valueFormatter.create({ value: Number(d.value) }).format(Number(d.value));\n                                });\n                            }\n                            var showLegend = this.getShowLegend(dataView);\n                            if (showLegend) {\n                            }\n                        }\n                    };\n                    /*public getColor(val) :string {\n                        if(val) {\n                            if (val < 5) {\n                                return 'Blue';\n                            } else if (val < 10) {\n                                return 'Orange';\n                            } else if (val < 20) {\n                                return 'Red';\n                            }\n                        }\n                        return '#000';\n                    }*/\n                    CrossTab.prototype.setViewportSize = function (viewport) {\n                        var height, width;\n                        height =\n                            viewport.height -\n                                this.margin.top -\n                                this.margin.bottom;\n                        width =\n                            viewport.width -\n                                this.margin.left -\n                                this.margin.right;\n                        this.viewport = {\n                            height: height,\n                            width: width\n                        };\n                        this.mainGraphics\n                            .attr(\"height\", Math.max(this.viewport.height + this.margin.top, 0))\n                            .attr(\"width\", Math.max(this.viewport.width + this.margin.left, 0));\n                        //this.mainGraphics.attr(\"transform\", SVGUtil.translate(this.margin.left, this.margin.top));\n                    };\n                    CrossTab.prototype.setSVGSize = function (viewport) {\n                        this.svg\n                            .attr(\"height\", this.svgSize.height)\n                            .attr(\"width\", this.svgSize.width);\n                        this.svgDiv\n                            .attr(\"style\", \"overflow: auto; height:\" + viewport.height + \"px; width:\" + viewport.width + \"px;\");\n                    };\n                    CrossTab.prototype.truncateTextIfNeeded = function (text, width) {\n                        /*text.call(AxisHelper.LabelLayoutStrategy.clip,\n                            width,\n                            TextMeasurementService.svgEllipsis);*/\n                    };\n                    /*private wrap(text, width): void {\n                        text.each(function () {\n                            var text = d3.select(this);\n                            var words = text.text().split(/\\s+/).reverse();\n                            var word;\n                            var line = [];\n                            var lineNumber = 0;\n                            var lineHeight = 1.1; // ems\n                            var x = text.attr(\"x\");\n                            var y = text.attr(\"y\");\n                            var dy = parseFloat(text.attr(\"dy\"));\n                            var tspan = text.text(null).append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n                            while (word = words.pop()) {\n                                line.push(word);\n                                tspan.text(line.join(\" \"));\n                                var tspannode: any = tspan.node();  //Fixing Typescript error: Property 'getComputedTextLength' does not exist on type 'Element'.\n                                if (tspannode.getComputedTextLength() > width) {\n                                    line.pop();\n                                    tspan.text(line.join(\" \"));\n                                    line = [word];\n                                    tspan = text.append(\"tspan\").attr(\"x\", x).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n                                }\n                            }\n                        });\n                    }*/\n                    CrossTab.prototype.getAnimationMode = function (element, suppressAnimations) {\n                        if (suppressAnimations) {\n                            return element;\n                        }\n                        return element.transition().duration(this.animationDuration);\n                    };\n                    CrossTab.prototype.getColors = function (dataView) {\n                        if (dataView) {\n                            var objects = dataView.metadata.objects;\n                            if (objects) {\n                                var general = objects['general'];\n                                if (general) {\n                                    for (var i = 1; i <= 5; i++) {\n                                        if (general['color' + i] && general['color' + i + 'Val']) {\n                                            this.dicColor[general['color' + i + 'Val']] = general['color' + i];\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    };\n                    CrossTab.prototype.getColor = function (dataView, colorNum) {\n                        if (dataView) {\n                            var objects = dataView.metadata.objects;\n                            if (objects) {\n                                var general = objects['general'];\n                                if (general) {\n                                    if (general['color' + colorNum]) {\n                                        return general['color' + colorNum];\n                                    }\n                                }\n                            }\n                        }\n                        return null;\n                    };\n                    CrossTab.prototype.getColorVal = function (dataView, colorNum) {\n                        if (dataView) {\n                            var objects = dataView.metadata.objects;\n                            if (objects) {\n                                var general = objects['general'];\n                                if (general) {\n                                    if (general['color' + colorNum + 'Val']) {\n                                        return general['color' + colorNum + 'Val'];\n                                    }\n                                }\n                            }\n                        }\n                        return null;\n                    };\n                    CrossTab.prototype.getLegendVal = function (dataView, colorNum) {\n                        if (dataView) {\n                            var objects = dataView.metadata.objects;\n                            if (objects) {\n                                var general = objects['general'];\n                                if (general) {\n                                    if (general['color' + colorNum + 'LegendVal']) {\n                                        return general['color' + colorNum + 'LegendVal'];\n                                    }\n                                }\n                            }\n                        }\n                        return null;\n                    };\n                    CrossTab.prototype.getShowData = function (dataView) {\n                        if (dataView) {\n                            var objects = dataView.metadata.objects;\n                            if (objects) {\n                                var general = objects['general'];\n                                if (general) {\n                                    return general['showdata'];\n                                }\n                            }\n                        }\n                        return false;\n                    };\n                    CrossTab.prototype.getShowLegend = function (dataView) {\n                        if (dataView) {\n                            var objects = dataView.metadata.objects;\n                            if (objects) {\n                                var general = objects['general'];\n                                if (general) {\n                                    return general['showlegend'];\n                                }\n                            }\n                        }\n                        return false;\n                    };\n                    CrossTab.prototype.getShowTotals = function (dataView) {\n                        if (dataView) {\n                            var objects = dataView.metadata.objects;\n                            if (objects) {\n                                var general = objects['general'];\n                                if (general) {\n                                    return general['showtotals'];\n                                }\n                            }\n                        }\n                        return false;\n                    };\n                    CrossTab.prototype.enumerateObjectInstances = function (options) {\n                        var instances = [];\n                        var dataView = this.dataView;\n                        var objectName = options.objectName;\n                        switch (options.objectName) {\n                            case 'general':\n                                instances.push({\n                                    objectName: 'general',\n                                    displayName: 'General',\n                                    selector: null,\n                                    properties: {\n                                        color1: this.getColor(dataView, '1'),\n                                        color1Val: this.getColorVal(dataView, '1'),\n                                        color1LegendVal: this.getLegendVal(dataView, '1'),\n                                        color2: this.getColor(dataView, '2'),\n                                        color2Val: this.getColorVal(dataView, '2'),\n                                        color2LegendVal: this.getLegendVal(dataView, '2'),\n                                        color3: this.getColor(dataView, '3'),\n                                        color3Val: this.getColorVal(dataView, '3'),\n                                        color3LegendVal: this.getLegendVal(dataView, '3'),\n                                        color4: this.getColor(dataView, '4'),\n                                        color4Val: this.getColorVal(dataView, '5'),\n                                        color4LegendVal: this.getLegendVal(dataView, '4'),\n                                        color5: this.getColor(dataView, '6'),\n                                        color5Val: this.getColorVal(dataView, '6'),\n                                        color5LegendVal: this.getLegendVal(dataView, '5'),\n                                        showdata: this.getShowData(dataView),\n                                        showlegend: this.getShowLegend(dataView),\n                                        showtotals: this.getShowTotals(dataView)\n                                    }\n                                });\n                                break;\n                            case 'dataPoint':\n                                if (this.dataView /*&& !GradientUtils.hasGradientRole(this.dataView.categorical)*/)\n                                    this.enumerateDataPoints(instances, options);\n                                break;\n                        }\n                        return instances;\n                    };\n                    CrossTab.prototype.enumerateDataPoints = function (instances, options) {\n                        var data = this.chartData;\n                        if (!data)\n                            return;\n                        var dicInstanceValues = [];\n                        var seriesCount = data.dataPoints.length;\n                        /*enumeration.pushInstance({\n                            objectName: 'dataPoint',\n                            selector: null,\n                            properties: {\n                                defaultColor: { solid: { color: data.defaultDataPointColor || this.colors.getColorByIndex(0).value } }\n                            }\n                        }).pushInstance({\n                            objectName: 'dataPoint',\n                            selector: null,\n                            properties: {\n                                showAllDataPoints: !!data.showAllDataPoints\n                            }\n                        });\n                        for (var i = 0; i < seriesCount; i++) {\n                            var seriesDataPoints = data.dataPoints[i];\n                            if (seriesDataPoints.value !== undefined || seriesDataPoints.value !== null) {\n                                if (!(this.dicColor[seriesDataPoints.value])) {\n                                    //add it to colors\n                                    this.dicColor[seriesDataPoints.value] = (seriesDataPoints.fill) ? seriesDataPoints.fill : '#E8E8E8';\n                                }\n                                \n                                if (!(dicInstanceValues[seriesDataPoints.value])) {\n                                    instances.push({\n                                        objectName: 'dataPoint',\n                                        displayName: seriesDataPoints.value.toString(),\n                                        selector: visuals.ColorHelper.normalizeSelector(seriesDataPoints.identity.getSelector()),\n                                        properties: {\n                                            fill: { solid: { color: seriesDataPoints.fill } }\n                                        },\n                                    });\n                                    dicInstanceValues[seriesDataPoints.value] = seriesDataPoints.fill;\n                                }\n                            \n                            \n                            }\n                      \n                        }*/\n                    };\n                    CrossTab.Properties = {\n                        general: {},\n                        dataPoint: {\n                            defaultColor: {\n                                objectName: 'dataPoint',\n                                propertyName: 'defaultColor' },\n                            fill: {\n                                objectName: 'dataPoint',\n                                propertyName: 'fill'\n                            },\n                            value: {\n                                objectName: 'dataPoint',\n                                propertyName: 'value'\n                            }\n                        },\n                        labels: {\n                            labelPrecision: {\n                                objectName: \"labels\",\n                                propertyName: \"labelPrecision\"\n                            }\n                        }\n                    };\n                    return CrossTab;\n                }());\n                PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77.CrossTab = CrossTab;\n            })(PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77 = visual.PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77 || (visual.PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77 = {}));\n        })(visual = extensibility.visual || (extensibility.visual = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\nvar powerbi;\n(function (powerbi) {\n    var visuals;\n    (function (visuals) {\n        var plugins;\n        (function (plugins) {\n            plugins.PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77_DEBUG = {\n                name: 'PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77_DEBUG',\n                displayName: 'CrossTab',\n                class: 'CrossTab',\n                version: '1.0.0',\n                apiVersion: '1.1.0',\n                create: function (options) { return new powerbi.extensibility.visual.PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77.CrossTab(options); },\n                custom: true\n            };\n        })(plugins = visuals.plugins || (visuals.plugins = {}));\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\n})(powerbi || (powerbi = {}));\n//# sourceMappingURL=visual.js.map","css":".visual-PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77_DEBUG p {\n  font-size: 20px;\n  font-weight: bold;\n}\n.visual-PBI_CV_522F2011_DD5A_44D2_A8ED_456F3931DF77_DEBUG p em {\n  background: yellow;\n  padding: 5px;\n}\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NEY1QjA1NUQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NEY1QjA1NEQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mjk5RDU1ODBGRDRFMDExQTcxQ0JFODI3ODBCQUE5RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpDoNX0AAAI3SURBVHjarJRLSFVRFIY9t7SiRDGLoEEPCRJRaCSYkxCiFCXCF+LIMExQLkilgumgwkbdBuWDRC2EomhURCOjgagkXEgKLUKhidobM6H0+i34rxyPnuvEA5/rXPda/1l7739vJxKJxG3ls93+hEKhTILxJhgMftmsiPxdhHw4CfepeR8dCyjWwwB0kZy3iVgCoQ2ewnmXxhrBD7Cgr/ZQVA17fDRPw2UYhzK6G99IsBse6/0QNME+H8FT4EA/YiPqOgA1q4IMzBNuw6iKjkCpj+Av+AdnEEmD3bxfhzvuDk30HaEaLsEkXCO53rN+Bwg5qsvTuj/TjGYtx9nINhRmEx7AYWiFW7AXOuEcbPOUvIZ2mnrl+PkQUbNEh4QHNKUSDdsSBWEOlmxTEfvs26FL9Khe211if6Acgee+xo7xzMgBxfq9qPe3fgWBGN2lEnqtG9nExM7CV3jp3bDos2bKJB0nHFRxAxRpA/5CIXyHh5ABv6GZqd9dJ6iz2SjbxMMypGhJFtTlNzu3kK7xgDxpove8U66FK2A+s6nul5gVVMEL+Ak7lG/T+g9JcIOGar2CRUoogxMwpP/bLTJMB9bRhDbkk5bBUU0y3ES0xS04CBfN9RSHiY90vJK0BHaSzG9h2eejS3RJeVfdtrGzuGyd8CX7Yq6ExuCH63jaVMPkFOv6OibB6DKs2+VEQp+WYBoqERn2sVWWRNN0YurIfeL14U6YkpkLYCSG6e0yqdCxvKBLIm5FgAEAV0nKuwMYRUsAAAAASUVORK5CYII="}}